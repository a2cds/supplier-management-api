# ==============================================================================
# DATASOURCE (Banco de Dados)
# ==============================================================================

# Tipo do Banco de Dados.
# Opções suportadas: h2, postgresql, mssql
# Valor padrão: h2 (Desenvolvimento Local)
quarkus.datasource.db-kind=${DB_KIND:h2}

# Credenciais de Acesso
quarkus.datasource.username=${DB_USER:sa}
quarkus.datasource.password=${DB_PASS:password}

# URL de Conexão JDBC
# O valor padrão conecta ao H2 em memória.
# Para outros bancos, sobrescreva a variável DB_URL.
quarkus.datasource.jdbc.url=${DB_URL:jdbc:h2:mem:supplierdb;DB_CLOSE_DELAY=-1}

# Tamanho do Pool de Conexões (Ajuste conforme ambiente)
quarkus.datasource.jdbc.max-size=${DB_POOL_MAX:20}
quarkus.datasource.jdbc.min-size=${DB_POOL_MIN:2}

# ==============================================================================
# HIBERNATE ORM / PANACHE
# ==============================================================================

# Estratégia de geração do Schema.
# 'update': Atualiza o banco automaticamente (Ideal para Dev/Test)
# 'validate': Apenas valida se o schema bate com as classes (Ideal para Prod)
quarkus.hibernate-orm.database.generation=${DB_GENERATION:update}

# Logs SQL (Útil para debug)
quarkus.hibernate-orm.log.sql=${DB_LOG_SQL:true}
quarkus.hibernate-orm.format-sql=true

# ==============================================================================
# INTEGRAÇÕES (CEP API)
# ==============================================================================
quarkus.rest-client.cep-api.url=http://cep.la
quarkus.rest-client.cep-api.scope=jakarta.inject.Singleton

# ==============================================================================
# CONFIGURAÇÕES ESPECÍFICAS (Workarounds e Otimizações)
# ==============================================================================

# [SQL Server] Evita erros de certificado SSL em ambientes de desenvolvimento/docker
# Se DB_KIND for mssql, estas propriedades ajudam a conectar sem certificado válido
quarkus.datasource.jdbc.additional-jdbc-properties.encrypt=false
quarkus.datasource.jdbc.additional-jdbc-properties.trustServerCertificate=true

# [PostgreSQL] Otimização sugerida para Quarkus
quarkus.hibernate-orm.jdbc.statement-batch-size=20